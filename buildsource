#!/bin/bash

[ -z "$JAVA_PATH" ] && JAVA_PATH=java
[ -z "$JAVAC_PATH" ] && JAVAC_PATH=javac
[ -z "$BUILDTOOLS_PATH" ] && BUILDTOOLS_PATH=~/Android/Sdk/build-tools/30.0.3
[ -z "$BAKSMALI_PATH" ] && BAKSMALI_PATH=/opt/baksmali/baksmali-2.4.0.jar


echo "JAVA_PATH: $JAVA_PATH"
echo "JAVAC_PATH: $JAVAC_PATH"
echo "BAKSMALI_PATH: $BAKSMALI_PATH"
echo "BUILDTOOLS_PATH: $BUILDTOOLS_PATH"

DX=$BUILDTOOLS_PATH/dx
OUTDIR=sourceout
echo ${SOURCES/.java/.class}
$JAVAC_PATH -cp source -d $OUTDIR -source 1.7 -target 1.7 source/bttv/ChatMessageDeligateWrapper.java &&
cd $OUTDIR &&
$DX --dex --output bttv/ChatMessageDeligateWrapper.dex bttv/ChatMessageDeligateWrapper.class &&
$JAVA_PATH -jar $BAKSMALI_PATH d -o . bttv/ChatMessageDeligateWrapper.dex &&
mkdir -p ../extracted/smali_classes10/bttv &&
cp bttv/ChatMessageDeligateWrapper.smali ../extracted/smali_classes10/bttv/ChatMessageDeligateWrapper.smali

